{
  "permissions": {
    "allow": [
      "Bash(cmd.exe:*)",
      "Bash(export:*)",
      "Bash(ls:*)",
      "Bash(mkdir:*)",
      "Bash(node -e \"\nconst W = 120, H = 20;\n\n// Helper: index into flat array\nfunction idx\\(row, col\\) { return row * W + col; }\n\n// Initialize all layers with zeros\nconst bg = new Array\\(W * H\\).fill\\(0\\);\nconst col = new Array\\(W * H\\).fill\\(0\\);\nconst fg = new Array\\(W * H\\).fill\\(0\\);\nconst dec = new Array\\(W * H\\).fill\\(0\\);\n\n// ============================================================\n// COLLISION LAYER - the main gameplay layer\n// ============================================================\n\n// Row 0: ceiling \\(tile 3\\) across entire width\nfor \\(let c = 0; c < W; c++\\) col[idx\\(0, c\\)] = 3;\n\n// Row 1: ceiling wall \\(tile 2\\) across entire width\nfor \\(let c = 0; c < W; c++\\) col[idx\\(1, c\\)] = 2;\n\n// Col 0: left wall \\(tile 2\\) rows 2-17\nfor \\(let r = 2; r < 18; r++\\) col[idx\\(r, 0\\)] = 2;\n\n// Col 119: right wall \\(tile 2\\) rows 2-17\nfor \\(let r = 2; r < 18; r++\\) col[idx\\(r, 119\\)] = 2;\n\n// Row 19: solid ground below floor \\(tile 2\\) across entire width\nfor \\(let c = 0; c < W; c++\\) col[idx\\(19, c\\)] = 2;\n\n// Row 18: stone floor \\(tile 1\\) across most of the width - we'll carve gaps later\nfor \\(let c = 0; c < W; c++\\) col[idx\\(18, c\\)] = 1;\n\n// ---- SECTION 1 \\(cols 0-20\\): Cell start + tutorial corridor ----\n// Inner wall on right side of cell at col 1 rows 2-12 \\(partial wall to make a cell feel\\)\nfor \\(let r = 2; r <= 8; r++\\) col[idx\\(r, 1\\)] = 2;\n\n// Small tutorial platforms for jumping practice\n// Platform at row 14, cols 5-7\nfor \\(let c = 5; c <= 7; c++\\) col[idx\\(14, c\\)] = 101; // wooden platform\n// Platform at row 15, cols 12-14\nfor \\(let c = 12; c <= 14; c++\\) col[idx\\(15, c\\)] = 100; // one-way platform\n// Platform at row 12, cols 17-19\nfor \\(let c = 17; c <= 19; c++\\) col[idx\\(12, c\\)] = 100;\n\n// Mossy floor in the cell area\nfor \\(let c = 1; c <= 6; c++\\) col[idx\\(18, c\\)] = 8; // moss floor\n\n// ---- SECTION 2 \\(cols 21-40\\): First enemies area ----\n// Spike pit at cols 28-30 \\(remove floor, place spikes\\)\nfor \\(let c = 28; c <= 30; c++\\) {\n  col[idx\\(18, c\\)] = 20; // spikes at floor level\n  col[idx\\(19, c\\)] = 2;  // solid below \\(already set\\)\n}\n\n// Platforms above the spike pit for safe crossing\nfor \\(let c = 27; c <= 31; c++\\) col[idx\\(15, c\\)] = 100; // one-way platform above pit\n\n// Combat platforms at various heights\nfor \\(let c = 22; c <= 25; c++\\) col[idx\\(14, c\\)] = 101; // wooden platform\nfor \\(let c = 33; c <= 36; c++\\) col[idx\\(13, c\\)] = 100; // one-way platform\nfor \\(let c = 37; c <= 39; c++\\) col[idx\\(16, c\\)] = 101; // wooden platform\n\n// Cracked floor near pit\ncol[idx\\(18, 26\\)] = 9; // cracked stone\ncol[idx\\(18, 32\\)] = 9; // cracked stone\n\n// ---- SECTION 3 \\(cols 41-60\\): Vertical shaft ----\n// Remove floor for vertical shaft cols 44-56\nfor \\(let c = 44; c <= 56; c++\\) {\n  col[idx\\(18, c\\)] = 0; // remove floor\n}\n// Keep floor at bottom edges for landing\n// col 41-43 and 57-60 keep their floor\n\n// Left wall of shaft\nfor \\(let r = 10; r <= 17; r++\\) col[idx\\(r, 43\\)] = 2;\n\n// Right wall of shaft  \nfor \\(let r = 10; r <= 17; r++\\) col[idx\\(r, 57\\)] = 2;\n\n// Staggered platforms inside the shaft \\(left side then right side, descending\\)\n// Left platforms\nfor \\(let c = 44; c <= 46; c++\\) col[idx\\(6, c\\)] = 100;\nfor \\(let c = 44; c <= 46; c++\\) col[idx\\(10, c\\)] = 100;\nfor \\(let c = 44; c <= 46; c++\\) col[idx\\(14, c\\)] = 100;\n\n// Right platforms\nfor \\(let c = 54; c <= 56; c++\\) col[idx\\(4, c\\)] = 100;\nfor \\(let c = 54; c <= 56; c++\\) col[idx\\(8, c\\)] = 100;\nfor \\(let c = 54; c <= 56; c++\\) col[idx\\(12, c\\)] = 100;\nfor \\(let c = 54; c <= 56; c++\\) col[idx\\(16, c\\)] = 100;\n\n// Center platforms\nfor \\(let c = 49; c <= 51; c++\\) col[idx\\(5, c\\)] = 101;\nfor \\(let c = 49; c <= 51; c++\\) col[idx\\(9, c\\)] = 101;\nfor \\(let c = 49; c <= 51; c++\\) col[idx\\(13, c\\)] = 101;\nfor \\(let c = 48; c <= 52; c++\\) col[idx\\(17, c\\)] = 1; // landing floor at bottom of shaft\n\n// Entry platform on left\nfor \\(let c = 41; c <= 43; c++\\) col[idx\\(6, c\\)] = 1;\n// Remove some ceiling above shaft entrance\n// Upper opening \nfor \\(let c = 44; c <= 56; c++\\) {\n  col[idx\\(1, c\\)] = 0; // open ceiling\n}\n\n// ---- SECTION 4 \\(cols 61-90\\): Trap gauntlet ----\n// Spike traps scattered in the floor\nconst spikePositions4 = [63, 64, 68, 69, 73, 74, 78, 79, 83, 84, 88, 89];\nfor \\(const c of spikePositions4\\) {\n  col[idx\\(18, c\\)] = 20; // spike trap\n}\n\n// Crumbling floors between spikes\nconst crumblePositions4 = [65, 66, 70, 71, 75, 76, 80, 81, 85, 86];\nfor \\(const c of crumblePositions4\\) {\n  col[idx\\(18, c\\)] = 21; // crumbling floor\n}\n\n// Safe platforms above for alternate routes\nfor \\(let c = 62; c <= 64; c++\\) col[idx\\(14, c\\)] = 100;\nfor \\(let c = 67; c <= 69; c++\\) col[idx\\(12, c\\)] = 101;\nfor \\(let c = 72; c <= 74; c++\\) col[idx\\(14, c\\)] = 100;\nfor \\(let c = 77; c <= 79; c++\\) col[idx\\(11, c\\)] = 101;\nfor \\(let c = 82; c <= 84; c++\\) col[idx\\(13, c\\)] = 100;\nfor \\(let c = 87; c <= 89; c++\\) col[idx\\(14, c\\)] = 101;\n\n// Some walls to create narrow passages\nfor \\(let r = 2; r <= 9; r++\\) col[idx\\(r, 66\\)] = 10; // stone brick wall variant\nfor \\(let r = 2; r <= 8; r++\\) col[idx\\(r, 76\\)] = 10;\nfor \\(let r = 2; r <= 7; r++\\) col[idx\\(r, 86\\)] = 10;\n\n// ---- SECTION 5 \\(cols 91-119\\): Final combat + exit ----\n// Open arena - floor is normal\n// Add some platforms for vertical combat\nfor \\(let c = 95; c <= 98; c++\\) col[idx\\(14, c\\)] = 101;\nfor \\(let c = 102; c <= 105; c++\\) col[idx\\(12, c\\)] = 100;\nfor \\(let c = 108; c <= 111; c++\\) col[idx\\(14, c\\)] = 101;\nfor \\(let c = 113; c <= 116; c++\\) col[idx\\(10, c\\)] = 100;\n\n// Exit door at col 118, row 17\ncol[idx\\(17, 118\\)] = 13; // exit door \\(golden\\)\ncol[idx\\(16, 118\\)] = 13; // exit door top half\n\n// Small steps leading to exit\ncol[idx\\(17, 116\\)] = 1;\ncol[idx\\(17, 117\\)] = 1;\n\n// ============================================================\n// BACKGROUND LAYER\n// ============================================================\n// Background stone brick walls for visual depth \\(behind air spaces\\)\nfor \\(let r = 2; r <= 17; r++\\) {\n  for \\(let c = 1; c < 119; c++\\) {\n    // Only place background where collision layer is air\n    if \\(col[idx\\(r, c\\)] === 0\\) {\n      // Scattered background walls for depth\n      if \\(\\(r + c\\) % 7 === 0 || \\(r * c\\) % 13 === 0\\) {\n        bg[idx\\(r, c\\)] = 10; // stone brick wall variant \\(background\\)\n      }\n    }\n  }\n}\n\n// More dense background in the cell \\(section 1\\)\nfor \\(let r = 2; r <= 17; r++\\) {\n  for \\(let c = 1; c <= 6; c++\\) {\n    if \\(col[idx\\(r, c\\)] === 0\\) {\n      bg[idx\\(r, c\\)] = 10;\n    }\n  }\n}\n\n// ============================================================\n// DECORATION LAYER\n// ============================================================\n// Torches along the level \\(on walls, at regular intervals\\)\n// Place torches at row 4 on certain columns \\(where there's wall behind\\)\nconst torchCols = [3, 10, 16, 24, 32, 40, 48, 58, 62, 70, 78, 86, 93, 100, 107, 114];\nfor \\(const c of torchCols\\) {\n  if \\(c < W\\) {\n    dec[idx\\(4, c\\)] = 30; // torch holder\n  }\n}\n\n// Extra torches at row 8\nconst torchCols2 = [5, 15, 25, 35, 60, 70, 80, 90, 105, 115];\nfor \\(const c of torchCols2\\) {\n  if \\(c < W\\) {\n    dec[idx\\(8, c\\)] = 30;\n  }\n}\n\n// Chains hanging from ceiling\nconst chainCols = [7, 13, 22, 30, 38, 50, 65, 75, 85, 96, 103, 110, 117];\nfor \\(const c of chainCols\\) {\n  if \\(c < W\\) {\n    dec[idx\\(2, c\\)] = 31; // chains\n    dec[idx\\(3, c\\)] = 31; // chains extending down\n  }\n}\n\n// Chains in the vertical shaft\nfor \\(let c = 47; c <= 53; c += 3\\) {\n  dec[idx\\(2, c\\)] = 31;\n  dec[idx\\(3, c\\)] = 31;\n}\n\n// ============================================================\n// FOREGROUND LAYER \\(mostly empty, occasional overlapping deco\\)\n// ============================================================\n// Some foreground chains that overlap the player for depth\nconst fgChainCols = [8, 20, 45, 55, 72, 82, 98, 112];\nfor \\(const c of fgChainCols\\) {\n  if \\(c < W\\) {\n    fg[idx\\(2, c\\)] = 31;\n    fg[idx\\(3, c\\)] = 31;\n    fg[idx\\(4, c\\)] = 31;\n  }\n}\n\n// ============================================================\n// ENTITIES\n// ============================================================\nconst entities = [\n  // Section 2: First enemies \\(3 orcs\\)\n  { type: 'orc', x: 24 * 48, y: 17 * 48 },\n  { type: 'orc', x: 33 * 48, y: 17 * 48 },\n  { type: 'orc', x: 38 * 48, y: 17 * 48 },\n  // Section 3: Vertical shaft \\(1 orc on a platform\\)\n  { type: 'orc', x: 50 * 48, y: 8 * 48 },\n  // Section 4: Trap gauntlet \\(2 orcs\\)\n  { type: 'orc', x: 67 * 48, y: 17 * 48 },\n  { type: 'orc', x: 80 * 48, y: 17 * 48 },\n  // Section 5: Final combat \\(2 orcs + 1 shaman\\)\n  { type: 'orc', x: 96 * 48, y: 17 * 48 },\n  { type: 'orc', x: 108 * 48, y: 17 * 48 },\n  { type: 'orc-shaman', x: 112 * 48, y: 9 * 48 }\n];\n\n// ============================================================\n// LIGHTS \\(torch positions in pixel coords\\)\n// ============================================================\nconst lights = [];\nconst allTorchCols = [...new Set\\([...torchCols, ...torchCols2]\\)].sort\\(\\(a,b\\) => a - b\\);\nfor \\(const c of torchCols\\) {\n  lights.push\\({ x: c * 48 + 24, y: 4 * 48 + 24, radius: 144, color: '#ff9933', intensity: 0.8 }\\);\n}\nfor \\(const c of torchCols2\\) {\n  lights.push\\({ x: c * 48 + 24, y: 8 * 48 + 24, radius: 144, color: '#ff9933', intensity: 0.7 }\\);\n}\n\n// ============================================================\n// BUILD FINAL JSON\n// ============================================================\nconst level = {\n  name: 'Dungeon Escape',\n  width: 120,\n  height: 20,\n  tileSize: 48,\n  tileset: 'dungeon',\n  layers: {\n    background: bg,\n    collision: col,\n    foreground: fg,\n    decoration: dec\n  },\n  entities: entities,\n  playerStart: { x: 96, y: 768 },\n  exitZone: { x: 118 * 48, y: 16 * 48, width: 48, height: 96 },\n  lights: lights,\n  backgroundType: 'dungeon'\n};\n\nconst json = JSON.stringify\\(level, null, 2\\);\n// Verify array lengths\nconst layerNames = ['background', 'collision', 'foreground', 'decoration'];\nfor \\(const name of layerNames\\) {\n  const len = level.layers[name].length;\n  if \\(len !== 2400\\) {\n    process.stderr.write\\('ERROR: ' + name + ' has ' + len + ' entries, expected 2400\\\\n'\\);\n    process.exit\\(1\\);\n  }\n}\n\nprocess.stderr.write\\('All layers have 2400 entries. JSON length: ' + json.length + ' chars\\\\n'\\);\nprocess.stdout.write\\(json\\);\n\" > \"C:/Users/aiaco/ClaudeCode/SimpleGameforKidsTraining/RealmOfShadows2/src/levels/data/level1_dungeon_escape.json\")",
      "Bash(node:*)",
      "Bash(python:*)",
      "Bash(start:*)",
      "Bash(curl:*)"
    ]
  }
}
